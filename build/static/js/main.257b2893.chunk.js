(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),u=t.n(c),o=t(2),l=t(3),i=t.n(l),s="/api/persons",m=function(){return i.a.get(s).then(function(e){return e.data})},d=function(e){return i.a.post(s,e)},f=function(e){var n="".concat(s,"/").concat(e);return i.a.delete(n)},b=function(e,n){var t="".concat(s,"/").concat(e);return i.a.put(t,n)},v=function(e){var n=e.person,t=e.deleteHandler;return r.a.createElement("li",{className:"person",id:n.id},n.name," ",n.number,r.a.createElement("button",{id:n.id,onClick:t},"delete"))},p=function(e){var n=e.persons,t=e.deleteHandler,a=n.map(function(e){return r.a.createElement(v,{key:e.id,person:e,deleteHandler:t})});return r.a.createElement("div",null,r.a.createElement("h2",null,"Numbers"),r.a.createElement("ul",null,a))},E=function(e){var n=e.name,t=e.number,a=e.onHandleNewEntry,c=e.onNumberInputChange,u=e.onNameInputChange;return r.a.createElement("form",null,r.a.createElement("h2",null,"Add a new number"),r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:n,onChange:u})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:t,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:a},"add")))},g=function(e){var n=e.filterState,t=e.onChangeListener;return r.a.createElement("div",null,r.a.createElement("h2",null,"Filter"),r.a.createElement("input",{value:n,onChange:t}))},h=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),l=Object(o.a)(u,2),i=l[0],s=l[1],v=Object(a.useState)(""),h=Object(o.a)(v,2),w=h[0],C=h[1],O=Object(a.useState)(""),j=Object(o.a)(O,2),N=j[0],k=j[1],S=Object(a.useState)({visible:!1,name:"",success:""}),y=Object(o.a)(S,2),H=y[0],I=y[1];Object(a.useEffect)(function(){m().then(function(e){c(e)})},[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),function(){if(!H.visible)return r.a.createElement(r.a.Fragment,null);var e=H.success?"success":"fail";return setTimeout(function(){I({visible:!1})},3e3),r.a.createElement("p",{className:"notification "+e},H.message)}(),r.a.createElement(g,{filterState:N,onChangeListener:function(e){k(e.target.value)}}),r.a.createElement(E,{onNameInputChange:function(e){s(e.target.value)},onNumberInputChange:function(e){C(e.target.value)},onHandleNewEntry:function(e){e.preventDefault();var n={name:i,number:Number(w)};if(t.some(function(e){return e.name===n.name&&e.number!==n.number})){if(!window.confirm("".concat(n.number," is already added to phonebook, replace the old number with a new one?")))return;var a=t.filter(function(e){return e.name===n.name})[0].id;console.log("".concat(a," of person to be updated")),b(a,n).then(function(e){var a=e.data;console.log(a),I({success:200===e.status,visible:!0,message:200===e.status?"Updated ".concat(a.name):"Can't update ".concat(n.name)}),c(t.map(function(e){return e.id!==a.id?e:a}))})}else d(n).then(function(e){console.log(e);var a=e.data;console.log(a),I({visible:!0,success:201===e.status,message:201===e.status?"Added ".concat(a.name):"Can't add ".concat(n.name)}),c(t.concat(a))});s(""),C("")},number:w,name:i}),r.a.createElement(p,{persons:t.filter(function(e){return-1!==e.name.indexOf(N)}),deleteHandler:function(e){e.preventDefault();var n=Number(e.target.getAttribute("id")),a=t.find(function(e){return e.id===n});window.confirm("Delete ".concat(a.name))&&f(n).then(function(e){200===e.status&&(I({success:!0,visible:!0,message:"".concat(a.name," is deleted")}),c(t.filter(function(e){return e.id!==n})))}).catch(function(e){I({success:!1,visible:!0,message:"".concat(a.name," can not be deleted")}),c(t.filter(function(e){return e.id!==n}))})}}))};t(36);u.a.render(r.a.createElement(h,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.257b2893.chunk.js.map